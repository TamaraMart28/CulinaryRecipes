@model RecipeViewModel

<h2>@Model.Name</h2>

<p><strong>Категория:</strong> @Model.Category</p>
<a href="/User?userId=@Model.UserId"><strong>Автор ссылка:</strong> @Model.Author</>
<p><strong>Время приготовления:</strong> @Model.Timing.ToString("HH:mm")</p>
<p><strong>Количество порций:</strong> @Model.PortionAmount</p>
<p><strong>Описание:</strong></p>
<p>@Model.Description</p>

@if (Model.ImagePath != null)
{
    <img src="@(string.IsNullOrEmpty(@Model.ImagePath) ? "~/Files/recipe.png" : @Model.ImagePath)" width="240" height="240" />
}

<h3>Ингредиенты:</h3>
<table>
    <thead>
        <tr>
            <th>Название</th>
            <th>Количество</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var ingredient in Model.RecipeIngredients)
        {
            <tr>
                <td>@ingredient.Name</td>
                <td>@ingredient.Amount</td>
            </tr>
        }
    </tbody>
</table>

<h3>Пошаговые шаги приготовления:</h3>
<ol>
    @foreach (var step in Model.RecipeSteps)
    {
        <li>
            @step.Description
            <img src="@(string.IsNullOrEmpty(@step.PhotoPath) ? "~/Files/recipe.png" : @step.PhotoPath)" width="240" height="240" />
        </li>
    }
</ol>

@if(Session.User != null)
{
    <a>Добавить в подборку</a>
    <form asp-action="AddCommentGrade" method="post">
        <input type="hidden" name="recipeId" value="@Model.Id">
        <input type="hidden" name="userId" value="@Model.UserId">
        <div class="form-group">
            <label for="comment">Ваш комментарий:</label>
            <textarea id="comment" name="comment" class="form-control" rows="4" required></textarea>
        </div>
        <div class="form-group">
            <label for="grade">Оцените рецепт:</label>
            <select id="grade" name="grade" class="form-control" required>
                <option value="1">1 (Ужасно)</option>
                <option value="2">2 (Плохо)</option>
                <option value="3">3 (Нормально)</option>
                <option value="4">4 (Хорошо)</option>
                <option value="5">5 (Отлично)</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Оставить комментарий и оценку</button>
    </form>
}

<p><strong>Комментарии к рецепту</strong></p>
@if(Model.CommentGrades.Count != 0) 
{
    <ul>
        @foreach (var comment in Model.CommentGrades)
        {
            <li>
                <a href="/User?userId=@Model.UserId"><strong>Пользователь:</strong> @comment.User</a>
                <p><strong>Оценка:</strong> @comment.Grade</p>
                <p><strong>Комментарий:</strong></p>
                <p>@comment.Comment</p>
            </li>
        }
    </ul>
}
else
{
    <p><strong>Комментариев пока нет</strong></p>
}
